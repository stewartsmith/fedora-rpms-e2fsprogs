Index: e2fsprogs-1.40.4/misc/mke2fs.conf
===================================================================
--- e2fsprogs-1.40.4.orig/misc/mke2fs.conf
+++ e2fsprogs-1.40.4/misc/mke2fs.conf
@@ -1,15 +1,19 @@
 [defaults]
 	base_features = sparse_super,filetype,resize_inode,dir_index
 	blocksize = 4096
-	inode_ratio = 8192
+	inode_size = 256
+	inode_ratio = 16384
 
 [fs_types]
 	small = {
 		blocksize = 1024
+		inode_size = 128
 		inode_ratio = 4096
 	}
 	floppy = {
 		blocksize = 1024
+		inode_size = 128
+		inode_ratio = 8192
 	}
 	news = {
 		inode_ratio = 4096
Index: e2fsprogs-1.40.4/tests/m_large_file/expect.1
===================================================================
--- e2fsprogs-1.40.4.orig/tests/m_large_file/expect.1
+++ e2fsprogs-1.40.4/tests/m_large_file/expect.1
@@ -1,3 +1,4 @@
+Warning: 256-byte inodes not usable on older systems
 Filesystem label=
 OS type: Linux
 Block size=4096 (log=2)
@@ -20,7 +21,7 @@ Pass 2: Checking directory structure
 Pass 3: Checking directory connectivity
 Pass 4: Checking reference counts
 Pass 5: Checking group summary information
-test_filesys: 11/64 files (9.1% non-contiguous), 15/16384 blocks
+test_filesys: 11/64 files (9.1% non-contiguous), 17/16384 blocks
 Exit status is 0
 
 Filesystem volume name:   <none>
@@ -35,7 +36,7 @@ Filesystem OS type:       Linux
 Inode count:              64
 Block count:              16384
 Reserved block count:     819
-Free blocks:              16369
+Free blocks:              16367
 Free inodes:              53
 First block:              0
 Block size:               4096
@@ -44,13 +45,13 @@ Reserved GDT blocks:      3
 Blocks per group:         32768
 Fragments per group:      32768
 Inodes per group:         64
-Inode blocks per group:   2
+Inode blocks per group:   4
 Mount count:              0
 Check interval:           15552000 (6 months)
 Reserved blocks uid:      0
 Reserved blocks gid:      0
 First inode:              11
-Inode size:		  128
+Inode size:		  256
 Default directory hash:   tea
 
 
@@ -58,7 +59,7 @@ Group 0: (Blocks 0-16383)
   Primary superblock at 0, Group descriptors at 1-1
   Reserved GDT blocks at 2-4
   Block bitmap at 5 (+5), Inode bitmap at 6 (+6)
-  Inode table at 7-8 (+7)
-  16369 free blocks, 53 free inodes, 2 directories
-  Free blocks: 15-16383
+  Inode table at 7-10 (+7)
+  16367 free blocks, 53 free inodes, 2 directories
+  Free blocks: 17-16383
   Free inodes: 12-64
